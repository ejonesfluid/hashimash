{
  "steps": [
    {
      "name": "golang",
      "env": [
        "GO111MODULE=on"
      ],
      "args": [
        "install",
        "delivery-api/cmd/main.go",
        "delivery-api"
      ]
    },
    {
      "name": "gcr.io/cloud-builders/docker",
      "args": [
        "build",
        "--tag=gcr.io/$PROJECT_ID/delivery-api:$SHORT_SHA",
        "-f",
        "delivery-api/Dockerfile",
        "."
      ]
    },
    {
      "name": "gcr.io/cloud-builders/docker:18.09.6",
      "args": [
        "tag",
        "gcr.io/$PROJECT_ID/delivery-api:$SHORT_SHA",
        "gcr.io/$PROJECT_ID/delivery-api:1.0.0"
      ]
    }
  ],
  "images": [
    "gcr.io/$PROJECT_ID/delivery-api:1.0.0"
  ]
}